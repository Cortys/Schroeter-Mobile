(function(){var a=Math,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",c="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,d="ontouchstart"in window,e=b+"Transform"in document.documentElement.style,f=/android/gi.test(navigator.appVersion),g=/iphone|ipad/gi.test(navigator.appVersion),h=/playbook/gi.test(navigator.appVersion),i=g||h,j=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),k=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),l="onorientationchange"in window?"orientationchange":"resize",m=d?"touchstart":"mousedown",n=d?"touchmove":"mousemove",o=d?"touchend":"mouseup",p=d?"touchcancel":"mouseup",q=b=="Moz"?"DOMMouseScroll":"mousewheel",r="translate"+(c?"3d(":"("),s=c?",0)":")",t=function(a,h){var j=this,k=document,n;j.wrapper=typeof a=="object"?a:k.getElementById(a);j.wrapper.style.overflow="hidden";j.scroller=j.wrapper.children[0];j.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:f,hideScrollbar:g,fadeScrollbar:g&&c,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(n in h)j.options[n]=h[n];j.x=j.options.x;j.y=j.options.y;j.options.useTransform=e?j.options.useTransform:false;j.options.hScrollbar=j.options.hScroll&&j.options.hScrollbar;j.options.vScrollbar=j.options.vScroll&&j.options.vScrollbar;j.options.zoom=j.options.useTransform&&j.options.zoom;j.options.useTransition=i&&j.options.useTransition;j.scroller.style[b+"TransitionProperty"]=j.options.useTransform?"-"+b.toLowerCase()+"-transform":"top left";j.scroller.style[b+"TransitionDuration"]="0";j.scroller.style[b+"TransformOrigin"]="0 0";if(j.options.useTransition)j.scroller.style[b+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";if(j.options.useTransform)j.scroller.style[b+"Transform"]=r+j.x+"px,"+j.y+"px"+s;else j.scroller.style.cssText+=";position:absolute;top:"+j.y+"px;left:"+j.x+"px";if(j.options.useTransition)j.options.fixedScrollbar=true;j.refresh();j._bind(l,window);j._bind(m);if(!d){j._bind("mouseout",j.wrapper);j._bind(q)}if(j.options.checkDOMChanges)j.checkDOMTime=setInterval(function(){j._checkDOMChanges()},500)};t.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case m:if(!d&&a.button!==0)return;b._start(a);break;case n:b._move(a);break;case o:case p:b._end(a);break;case l:b._resize();break;case q:b._wheel(a);break;case"mouseout":b._mouseout(a);break;case"webkitTransitionEnd":b._transitionEnd(a);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(c){var d=this,f=document,g;if(!d[c+"Scrollbar"]){if(d[c+"ScrollbarWrapper"]){if(e)d[c+"ScrollbarIndicator"].style[b+"Transform"]="";d[c+"ScrollbarWrapper"].parentNode.removeChild(d[c+"ScrollbarWrapper"]);d[c+"ScrollbarWrapper"]=null;d[c+"ScrollbarIndicator"]=null}return}if(!d[c+"ScrollbarWrapper"]){g=f.createElement("div");if(d.options.scrollbarClass)g.className=d.options.scrollbarClass+c.toUpperCase();else g.style.cssText="position:absolute;z-index:100;"+(c=="h"?"height:7px;bottom:1px;left:2px;right:"+(d.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(d.hScrollbar?"7":"2")+"px;top:2px;right:1px");g.style.cssText+=";pointer-events:none;-"+b+"-transition-property:opacity;-"+b+"-transition-duration:"+(d.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(d.options.hideScrollbar?"0":"1");d.wrapper.appendChild(g);d[c+"ScrollbarWrapper"]=g;g=f.createElement("div");if(!d.options.scrollbarClass){g.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+b+"-background-clip:padding-box;-"+b+"-box-sizing:border-box;"+(c=="h"?"height:100%":"width:100%")+";-"+b+"-border-radius:3px;border-radius:3px"}g.style.cssText+=";pointer-events:none;-"+b+"-transition-property:-"+b+"-transform;-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+b+"-transition-duration:0;-"+b+"-transform:"+r+"0,0"+s;if(d.options.useTransition)g.style.cssText+=";-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";d[c+"ScrollbarWrapper"].appendChild(g);d[c+"ScrollbarIndicator"]=g}if(c=="h"){d.hScrollbarSize=d.hScrollbarWrapper.clientWidth;d.hScrollbarIndicatorSize=a.max(a.round(d.hScrollbarSize*d.hScrollbarSize/d.scrollerW),8);d.hScrollbarIndicator.style.width=d.hScrollbarIndicatorSize+"px";d.hScrollbarMaxScroll=d.hScrollbarSize-d.hScrollbarIndicatorSize;d.hScrollbarProp=d.hScrollbarMaxScroll/d.maxScrollX}else{d.vScrollbarSize=d.vScrollbarWrapper.clientHeight;d.vScrollbarIndicatorSize=a.max(a.round(d.vScrollbarSize*d.vScrollbarSize/d.scrollerH),8);d.vScrollbarIndicator.style.height=d.vScrollbarIndicatorSize+"px";d.vScrollbarMaxScroll=d.vScrollbarSize-d.vScrollbarIndicatorSize;d.vScrollbarProp=d.vScrollbarMaxScroll/d.maxScrollY}d._scrollbarPos(c,true)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},f?200:0)},_pos:function(c,d){c=this.hScroll?c:0;d=this.vScroll?d:0;if(this.options.useTransform){this.scroller.style[b+"Transform"]=r+c+"px,"+d+"px"+s+" scale("+this.scale+")"}else{c=a.round(c);d=a.round(d);this.scroller.style.left=c+"px";this.scroller.style.top=d+"px"}this.x=c;this.y=d;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(c,d){var e=this,f=c=="h"?e.x:e.y,g;if(!e[c+"Scrollbar"])return;f=e[c+"ScrollbarProp"]*f;if(f<0){if(!e.options.fixedScrollbar){g=e[c+"ScrollbarIndicatorSize"]+a.round(f*3);if(g<8)g=8;e[c+"ScrollbarIndicator"].style[c=="h"?"width":"height"]=g+"px"}f=0}else if(f>e[c+"ScrollbarMaxScroll"]){if(!e.options.fixedScrollbar){g=e[c+"ScrollbarIndicatorSize"]-a.round((f-e[c+"ScrollbarMaxScroll"])*3);if(g<8)g=8;e[c+"ScrollbarIndicator"].style[c=="h"?"width":"height"]=g+"px";f=e[c+"ScrollbarMaxScroll"]+(e[c+"ScrollbarIndicatorSize"]-g)}else{f=e[c+"ScrollbarMaxScroll"]}}e[c+"ScrollbarWrapper"].style[b+"TransitionDelay"]="0";e[c+"ScrollbarWrapper"].style.opacity=d&&e.options.hideScrollbar?"0":"1";e[c+"ScrollbarIndicator"].style[b+"Transform"]=r+(c=="h"?f+"px,0":"0,"+f+"px")+s},_start:function(c){var e=this,f=d?c.touches[0]:c,g,h,i,j,l;if(!e.enabled)return;if(e.options.onBeforeScrollStart)e.options.onBeforeScrollStart.call(e,c);if(e.options.useTransition||e.options.zoom)e._transitionTime(0);e.moved=false;e.animating=false;e.zoomed=false;e.distX=0;e.distY=0;e.absDistX=0;e.absDistY=0;e.dirX=0;e.dirY=0;if(e.options.zoom&&d&&c.touches.length>1){j=a.abs(c.touches[0].pageX-c.touches[1].pageX);l=a.abs(c.touches[0].pageY-c.touches[1].pageY);e.touchesDistStart=a.sqrt(j*j+l*l);e.originX=a.abs(c.touches[0].pageX+c.touches[1].pageX-e.wrapperOffsetLeft*2)/2-e.x;e.originY=a.abs(c.touches[0].pageY+c.touches[1].pageY-e.wrapperOffsetTop*2)/2-e.y;if(e.options.onZoomStart)e.options.onZoomStart.call(e,c)}if(e.options.momentum){if(e.options.useTransform){g=getComputedStyle(e.scroller,null)[b+"Transform"].replace(/[^0-9-.,]/g,"").split(",");h=g[4]*1;i=g[5]*1}else{h=getComputedStyle(e.scroller,null).left.replace(/[^0-9-]/g,"")*1;i=getComputedStyle(e.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(h!=e.x||i!=e.y){if(e.options.useTransition)e._unbind("webkitTransitionEnd");else k(e.aniTime);e.steps=[];e._pos(h,i)}}e.absStartX=e.x;e.absStartY=e.y;e.startX=e.x;e.startY=e.y;e.pointX=f.pageX;e.pointY=f.pageY;e.startTime=c.timeStamp||Date.now();if(e.options.onScrollStart)e.options.onScrollStart.call(e,c);e._bind(n);e._bind(o);e._bind(p)},_move:function(c){var e=this,f=d?c.touches[0]:c,g=f.pageX-e.pointX,h=f.pageY-e.pointY,i=e.x+g,j=e.y+h,k,l,m,n=c.timeStamp||Date.now();if(e.options.onBeforeScrollMove)e.options.onBeforeScrollMove.call(e,c);if(e.options.zoom&&d&&c.touches.length>1){k=a.abs(c.touches[0].pageX-c.touches[1].pageX);l=a.abs(c.touches[0].pageY-c.touches[1].pageY);e.touchesDist=a.sqrt(k*k+l*l);e.zoomed=true;m=1/e.touchesDistStart*e.touchesDist*this.scale;if(m<e.options.zoomMin)m=.5*e.options.zoomMin*Math.pow(2,m/e.options.zoomMin);else if(m>e.options.zoomMax)m=2*e.options.zoomMax*Math.pow(.5,e.options.zoomMax/m);e.lastScale=m/this.scale;i=this.originX-this.originX*e.lastScale+this.x,j=this.originY-this.originY*e.lastScale+this.y;this.scroller.style[b+"Transform"]=r+i+"px,"+j+"px"+s+" scale("+m+")";if(e.options.onZoom)e.options.onZoom.call(e,c);return}e.pointX=f.pageX;e.pointY=f.pageY;if(i>0||i<e.maxScrollX){i=e.options.bounce?e.x+g/2:i>=0||e.maxScrollX>=0?0:e.maxScrollX}if(j>e.minScrollY||j<e.maxScrollY){j=e.options.bounce?e.y+h/2:j>=e.minScrollY||e.maxScrollY>=0?e.minScrollY:e.maxScrollY}if(e.absDistX<6&&e.absDistY<6){e.distX+=g;e.distY+=h;e.absDistX=a.abs(e.distX);e.absDistY=a.abs(e.distY);return}if(e.options.lockDirection){if(e.absDistX>e.absDistY+5){j=e.y;h=0}else if(e.absDistY>e.absDistX+5){i=e.x;g=0}}e.moved=true;e._pos(i,j);e.dirX=g>0?-1:g<0?1:0;e.dirY=h>0?-1:h<0?1:0;if(n-e.startTime>300){e.startTime=n;e.startX=e.x;e.startY=e.y}if(e.options.onScrollMove)e.options.onScrollMove.call(e,c)},_end:function(c){if(d&&c.touches.length!=0)return;var e=this,f=d?c.changedTouches[0]:c,g,h,i={dist:0,time:0},j={dist:0,time:0},k=(c.timeStamp||Date.now())-e.startTime,l=e.x,m=e.y,q,t,u,v,w;e._unbind(n);e._unbind(o);e._unbind(p);if(e.options.onBeforeScrollEnd)e.options.onBeforeScrollEnd.call(e,c);if(e.zoomed){w=e.scale*e.lastScale;w=Math.max(e.options.zoomMin,w);w=Math.min(e.options.zoomMax,w);e.lastScale=w/e.scale;e.scale=w;e.x=e.originX-e.originX*e.lastScale+e.x;e.y=e.originY-e.originY*e.lastScale+e.y;e.scroller.style[b+"TransitionDuration"]="200ms";e.scroller.style[b+"Transform"]=r+e.x+"px,"+e.y+"px"+s+" scale("+e.scale+")";e.zoomed=false;e.refresh();if(e.options.onZoomEnd)e.options.onZoomEnd.call(e,c);return}if(!e.moved){if(d){if(e.doubleTapTimer&&e.options.zoom){clearTimeout(e.doubleTapTimer);e.doubleTapTimer=null;if(e.options.onZoomStart)e.options.onZoomStart.call(e,c);e.zoom(e.pointX,e.pointY,e.scale==1?e.options.doubleTapZoom:1);if(e.options.onZoomEnd){setTimeout(function(){e.options.onZoomEnd.call(e,c)},200)}}else{e.doubleTapTimer=setTimeout(function(){e.doubleTapTimer=null;g=f.target;while(g.nodeType!=1)g=g.parentNode;if(g.tagName!="SELECT"&&g.tagName!="INPUT"&&g.tagName!="TEXTAREA"){h=document.createEvent("MouseEvents");h.initMouseEvent("click",true,true,c.view,1,f.screenX,f.screenY,f.clientX,f.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null);h._fake=true;g.dispatchEvent(h)}},e.options.zoom?250:0)}}e._resetPos(200);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,c);return}if(k<300&&e.options.momentum){i=l?e._momentum(l-e.startX,k,-e.x,e.scrollerW-e.wrapperW+e.x,e.options.bounce?e.wrapperW:0):i;j=m?e._momentum(m-e.startY,k,-e.y,e.maxScrollY<0?e.scrollerH-e.wrapperH+e.y-e.minScrollY:0,e.options.bounce?e.wrapperH:0):j;l=e.x+i.dist;m=e.y+j.dist;if(e.x>0&&l>0||e.x<e.maxScrollX&&l<e.maxScrollX)i={dist:0,time:0};if(e.y>e.minScrollY&&m>e.minScrollY||e.y<e.maxScrollY&&m<e.maxScrollY)j={dist:0,time:0}}if(i.dist||j.dist){u=a.max(a.max(i.time,j.time),10);if(e.options.snap){q=l-e.absStartX;t=m-e.absStartY;if(a.abs(q)<e.options.snapThreshold&&a.abs(t)<e.options.snapThreshold){e.scrollTo(e.absStartX,e.absStartY,200)}else{v=e._snap(l,m);l=v.x;m=v.y;u=a.max(v.time,u)}}e.scrollTo(a.round(l),a.round(m),u);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,c);return}if(e.options.snap){q=l-e.absStartX;t=m-e.absStartY;if(a.abs(q)<e.options.snapThreshold&&a.abs(t)<e.options.snapThreshold)e.scrollTo(e.absStartX,e.absStartY,200);else{v=e._snap(e.x,e.y);if(v.x!=e.x||v.y!=e.y)e.scrollTo(v.x,v.y,v.time)}if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,c);return}e._resetPos(200);if(e.options.onTouchEnd)e.options.onTouchEnd.call(e,c)},_resetPos:function(a){var c=this,d=c.x>=0?0:c.x<c.maxScrollX?c.maxScrollX:c.x,e=c.y>=c.minScrollY||c.maxScrollY>0?c.minScrollY:c.y<c.maxScrollY?c.maxScrollY:c.y;if(d==c.x&&e==c.y){if(c.moved){c.moved=false;if(c.options.onScrollEnd)c.options.onScrollEnd.call(c)}if(c.hScrollbar&&c.options.hideScrollbar){if(b=="webkit")c.hScrollbarWrapper.style[b+"TransitionDelay"]="300ms";c.hScrollbarWrapper.style.opacity="0"}if(c.vScrollbar&&c.options.hideScrollbar){if(b=="webkit")c.vScrollbarWrapper.style[b+"TransitionDelay"]="300ms";c.vScrollbarWrapper.style.opacity="0"}return}c.scrollTo(d,e,a||0)},_wheel:function(a){var b=this,c,d,e,f,g;if("wheelDeltaX"in a){c=a.wheelDeltaX/12;d=a.wheelDeltaY/12}else if("detail"in a){c=d=-a.detail*3}else{c=d=-a.wheelDelta}if(b.options.wheelAction=="zoom"){g=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0));if(g<b.options.zoomMin)g=b.options.zoomMin;if(g>b.options.zoomMax)g=b.options.zoomMax;if(g!=b.scale){if(!b.wheelZoomCount&&b.options.onZoomStart)b.options.onZoomStart.call(b,a);b.wheelZoomCount++;b.zoom(a.pageX,a.pageY,g,400);setTimeout(function(){b.wheelZoomCount--;if(!b.wheelZoomCount&&b.options.onZoomEnd)b.options.onZoomEnd.call(b,a)},400)}return}e=b.x+c;f=b.y+d;if(e>0)e=0;else if(e<b.maxScrollX)e=b.maxScrollX;if(f>b.minScrollY)f=b.minScrollY;else if(f<b.maxScrollY)f=b.maxScrollY;b.scrollTo(e,f,0)},_mouseout:function(a){var b=a.relatedTarget;if(!b){this._end(a);return}while(b=b.parentNode)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind("webkitTransitionEnd");b._startAni()},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),f,g,h;if(b.animating)return;if(!b.steps.length){b._resetPos(400);return}f=b.steps.shift();if(f.x==c&&f.y==d)f.time=0;b.animating=true;b.moved=true;if(b.options.useTransition){b._transitionTime(f.time);b._pos(f.x,f.y);b.animating=false;if(f.time)b._bind("webkitTransitionEnd");else b._resetPos(0);return}h=function(){var i=Date.now(),k,l;if(i>=e+f.time){b._pos(f.x,f.y);b.animating=false;if(b.options.onAnimationEnd)b.options.onAnimationEnd.call(b);b._startAni();return}i=(i-e)/f.time-1;g=a.sqrt(1-i*i);k=(f.x-c)*g+c;l=(f.y-d)*g+d;b._pos(k,l);if(b.animating)b.aniTime=j(h)};h()},_transitionTime:function(a){a+="ms";this.scroller.style[b+"TransitionDuration"]=a;if(this.hScrollbar)this.hScrollbarIndicator.style[b+"TransitionDuration"]=a;if(this.vScrollbar)this.vScrollbarIndicator.style[b+"TransitionDuration"]=a},_momentum:function(b,c,d,e,f){var g=6e-4,h=a.abs(b)/c,i=h*h/(2*g),j=0,k=0;if(b>0&&i>d){k=f/(6/(i/h*g));d=d+k;h=h*d/i;i=d}else if(b<0&&i>e){k=f/(6/(i/h*g));e=e+k;h=h*e/i;i=e}i=i*(b<0?-1:1);j=h/g;return{dist:i,time:a.round(j)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent){b-=a.offsetLeft;c-=a.offsetTop}if(a!=this.wrapper){b*=this.scale;c*=this.scale}return{left:b,top:c}},_snap:function(b,c){var d=this,e,f,g,h,i,j;g=d.pagesX.length-1;for(e=0,f=d.pagesX.length;e<f;e++){if(b>=d.pagesX[e]){g=e;break}}if(g==d.currPageX&&g>0&&d.dirX<0)g--;b=d.pagesX[g];i=a.abs(b-d.pagesX[d.currPageX]);i=i?a.abs(d.x-b)/i*500:0;d.currPageX=g;g=d.pagesY.length-1;for(e=0;e<g;e++){if(c>=d.pagesY[e]){g=e;break}}if(g==d.currPageY&&g>0&&d.dirY<0)g--;c=d.pagesY[g];j=a.abs(c-d.pagesY[d.currPageY]);j=j?a.abs(d.y-c)/j*500:0;d.currPageY=g;h=a.round(a.max(i,j))||200;return{x:b,y:c,time:h}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[b+"Transform"]="";a.hScrollbar=false;a.vScrollbar=false;a._scrollbar("h");a._scrollbar("v");a._unbind(l,window);a._unbind(m);a._unbind(n);a._unbind(o);a._unbind(p);if(a.options.hasTouch){a._unbind("mouseout",a.wrapper);a._unbind(q)}if(a.options.useTransition)a._unbind("webkitTransitionEnd");if(a.options.checkDOMChanges)clearInterval(a.checkDOMTime);if(a.options.onDestroy)a.options.onDestroy.call(a)},refresh:function(){var c=this,d,e,f,g,h=0,i=0;if(c.scale<c.options.zoomMin)c.scale=c.options.zoomMin;c.wrapperW=c.wrapper.clientWidth||1;c.wrapperH=c.wrapper.clientHeight||1;c.minScrollY=-c.options.topOffset||0;c.scrollerW=a.round(c.scroller.offsetWidth*c.scale);c.scrollerH=a.round((c.scroller.offsetHeight+c.minScrollY)*c.scale);c.maxScrollX=c.wrapperW-c.scrollerW;c.maxScrollY=c.wrapperH-c.scrollerH+c.minScrollY;c.dirX=0;c.dirY=0;if(c.options.onRefresh)c.options.onRefresh.call(c);c.hScroll=c.options.hScroll&&c.maxScrollX<0;c.vScroll=c.options.vScroll&&(!c.options.bounceLock&&!c.hScroll||c.scrollerH>c.wrapperH);c.hScrollbar=c.hScroll&&c.options.hScrollbar;c.vScrollbar=c.vScroll&&c.options.vScrollbar&&c.scrollerH>c.wrapperH;d=c._offset(c.wrapper);c.wrapperOffsetLeft=-d.left;c.wrapperOffsetTop=-d.top;if(typeof c.options.snap=="string"){c.pagesX=[];c.pagesY=[];g=c.scroller.querySelectorAll(c.options.snap);for(e=0,f=g.length;e<f;e++){h=c._offset(g[e]);h.left+=c.wrapperOffsetLeft;h.top+=c.wrapperOffsetTop;c.pagesX[e]=h.left<c.maxScrollX?c.maxScrollX:h.left*c.scale;c.pagesY[e]=h.top<c.maxScrollY?c.maxScrollY:h.top*c.scale}}else if(c.options.snap){c.pagesX=[];while(h>=c.maxScrollX){c.pagesX[i]=h;h=h-c.wrapperW;i++}if(c.maxScrollX%c.wrapperW)c.pagesX[c.pagesX.length]=c.maxScrollX-c.pagesX[c.pagesX.length-1]+c.pagesX[c.pagesX.length-1];h=0;i=0;c.pagesY=[];while(h>=c.maxScrollY){c.pagesY[i]=h;h=h-c.wrapperH;i++}if(c.maxScrollY%c.wrapperH)c.pagesY[c.pagesY.length]=c.maxScrollY-c.pagesY[c.pagesY.length-1]+c.pagesY[c.pagesY.length-1]}c._scrollbar("h");c._scrollbar("v");if(!c.zoomed){c.scroller.style[b+"TransitionDuration"]="0";c._resetPos(200)}},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop();if(!f.length)f=[{x:a,y:b,time:c,relative:d}];for(g=0,h=f.length;g<h;g++){if(f[g].relative){f[g].x=e.x-f[g].x;f[g].y=e.y-f[g].y}e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0})}e._startAni()},scrollToElement:function(b,c){var d=this,e;b=b.nodeType?b:d.scroller.querySelector(b);if(!b)return;e=d._offset(b);e.left+=d.wrapperOffsetLeft;e.top+=d.wrapperOffsetTop;e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left;e.top=e.top>d.minScrollY?d.minScrollY:e.top<d.maxScrollY?d.maxScrollY:e.top;c=c===undefined?a.max(a.abs(e.left)*2,a.abs(e.top)*2):c;d.scrollTo(e.left,e.top,c)},scrollToPage:function(a,b,c){var d=this,e,f;if(d.options.onScrollStart)d.options.onScrollStart.call(d);if(d.options.snap){a=a=="next"?d.currPageX+1:a=="prev"?d.currPageX-1:a;b=b=="next"?d.currPageY+1:b=="prev"?d.currPageY-1:b;a=a<0?0:a>d.pagesX.length-1?d.pagesX.length-1:a;b=b<0?0:b>d.pagesY.length-1?d.pagesY.length-1:b;d.currPageX=a;d.currPageY=b;e=d.pagesX[a];f=d.pagesY[b]}else{e=-d.wrapperW*a;f=-d.wrapperH*b;if(e<d.maxScrollX)e=d.maxScrollX;if(f<d.maxScrollY)f=d.maxScrollY}d.scrollTo(e,f,c||400)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(n);this._unbind(o);this._unbind(p)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind("webkitTransitionEnd");else k(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(a,c,d,e){var f=this,g=d/f.scale;if(!f.options.useTransform)return;f.zoomed=true;e=e===undefined?200:e;a=a-f.wrapperOffsetLeft-f.x;c=c-f.wrapperOffsetTop-f.y;f.x=a-a*g+f.x;f.y=c-c*g+f.y;f.scale=d;f.refresh();f.x=f.x>0?0:f.x<f.maxScrollX?f.maxScrollX:f.x;f.y=f.y>f.minScrollY?f.minScrollY:f.y<f.maxScrollY?f.maxScrollY:f.y;f.scroller.style[b+"TransitionDuration"]=e+"ms";f.scroller.style[b+"Transform"]=r+f.x+"px,"+f.y+"px"+s+" scale("+d+")";f.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined")exports.iScroll=t;else window.iScroll=t})()